#include<stdio.h>
#include<stdlib.h>

struct Item
{
    int value;
    int weight;
};

int compareItems(const void *a, const void *b)
{
    double p1 = ((struct Item*)b)->value / (double)((struct Item*)b)->weight;
    double p2 = ((struct Item*)a)->value / (double)((struct Item*)a)->weight;
    return (p1 > p2) - (p1 < p2);
}

int main()
{
    struct Item a[] = { {21, 7}, {24, 4}, {12, 6}, {40, 5}, {30, 6} };
    int n = 5, wt = 20, amount = 0;

    qsort(a, n, sizeof(struct Item), compareItems);

    for (int i = 0; i < n; i++)
    {
        if (a[i].weight <= wt)
        {
            wt = wt - a[i].weight;
            amount = amount + a[i].value;
        }
        else
        {
            amount = amount + (int)((a[i].value / (double)a[i].weight) * wt);
            break;
        }
    }

    printf("Final Amount = %d\n", amount);

    return 0;
}
